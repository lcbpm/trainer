# Flask 并发处理请求原理

## 单进程/单线程模式

- Flask 基于 WSGI 协议，默认是同步处理请求的。
- 在单进程/单线程模式下，Flask 一次只能处理一个请求，前一个请求没处理完，后一个请求必须等待。
- 这种模式适合开发调试，但不适合生产环境。

---

## 多进程/多线程部署

- 实际生产环境中，通常使用 Gunicorn、uWSGI 等 WSGI 服务器部署 Flask。
- 这些服务器可以配置多个 worker（进程或线程），每个 worker 可以同时处理一个请求。
- 这样整体上可以并发处理多个请求，但每个 worker 内部依然是同步的。

---

## 与 FastAPI 的对比

- **FastAPI（ASGI）**：原生支持异步，一个进程内可以高效地并发处理大量请求，尤其适合 IO 密集型任务，也支持 WebSocket 等现代协议。
- **Flask（WSGI）**：单 worker 内同步处理，遇到阻塞会影响并发，扩展并发能力主要靠增加进程/线程数。

---

## 总结

- Flask 单进程/线程下确实一次只能处理一个请求，但实际生产环境可以通过多进程/多线程提升并发能力。
- 不过 Flask 本质上不支持异步并发，和 FastAPI 的高并发异步机制有本质区别。

如需更详细的原理或部署方案说明，可以继续提问！ 