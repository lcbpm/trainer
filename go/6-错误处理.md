# 6. é”™è¯¯å¤„ç†

## ğŸ“‹ ç›®å½•

- [6.1 é”™è¯¯å¤„ç†ç†è®º](#61-é”™è¯¯å¤„ç†ç†è®º)
- [6.2 é”™è¯¯å¤„ç†å®è·µ](#62-é”™è¯¯å¤„ç†å®è·µ)

---

**Q: erroræ¥å£çš„è®¾è®¡å“²å­¦ï¼Ÿ**
- æ˜¾å¼é”™è¯¯å¤„ç†vså¼‚å¸¸æœºåˆ¶
- errors.Iså’Œerrors.Asçš„ä½¿ç”¨

**Q: å¦‚ä½•è®¾è®¡è‰¯å¥½çš„é”™è¯¯å¤„ç†ï¼Ÿ**
- é”™è¯¯åŒ…è£…å’Œä¸Šä¸‹æ–‡ä¿¡æ¯

### 6.2 é”™è¯¯å¤„ç†å®è·µ

#### é”™è¯¯åŒ…è£…
```go
func processFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        return fmt.Errorf("æ‰“å¼€æ–‡ä»¶å¤±è´¥ %s: %w", filename, err)
    }
    defer file.Close()
    
    data, err := io.ReadAll(file)
    if err != nil {
        return fmt.Errorf("è¯»å–æ–‡ä»¶å†…å®¹å¤±è´¥ %s: %w", filename, err)
    }
    
    if err := process(data); err != nil {
        return fmt.Errorf("å¤„ç†æ•°æ®å¤±è´¥: %w", err)
    }
    
    return nil
}
```

#### è‡ªå®šä¹‰é”™è¯¯ç±»å‹
```go
type ValidationError struct {
    Field string
    Value interface{}
    Tag   string
}

func (e ValidationError) Error() string {
    return fmt.Sprintf("éªŒè¯å¤±è´¥: å­—æ®µ %s å€¼ %v ä¸æ»¡è¶³è§„åˆ™ %s", 
        e.Field, e.Value, e.Tag)
}

func validate(data interface{}) error {
    // éªŒè¯é€»è¾‘
    return &ValidationError{
        Field: "email",
        Value: "invalid-email",
        Tag:   "email",
    }
}
```